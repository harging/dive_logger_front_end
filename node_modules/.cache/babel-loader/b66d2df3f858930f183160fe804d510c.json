{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gavinhargin/Documents/Projects/CodeClan_FinalProject/dive_app_front_end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/gavinhargin/Documents/Projects/CodeClan_FinalProject/dive_app_front_end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/gavinhargin/Documents/Projects/CodeClan_FinalProject/dive_app_front_end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState,useEffect}from'react';import DiveSelect from'../components/DiveSelect';import Dive from'../components/Dive';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var baseUrl='https://dive-logger-back-end.herokuapp.com';var DiveContainer=function DiveContainer(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dives=_useState2[0],setDives=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedDiveId=_useState4[0],setSelectedDiveId=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),samplePoints=_useState6[0],setSamplePoints=_useState6[1];useEffect(function(){getDives();},[]);function getDives(){return _getDives.apply(this,arguments);}function _getDives(){_getDives=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,dives;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(baseUrl,\"/dives\"));case 2:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error(\"HTTP error! status: \".concat(response.status));case 5:_context.next=7;return response.json();case 7:dives=_context.sent;setDives(dives);case 9:case\"end\":return _context.stop();}}},_callee);}));return _getDives.apply(this,arguments);}var handleDiveSelected=function handleDiveSelected(id){setSelectedDiveId(id);getSamplePoints(id);window.scrollTo({top:400,left:100,behavior:'smooth'});};var getSamplePoints=function getSamplePoints(id){fetch(\"\".concat(baseUrl,\"/samplepoints/bydiveid?diveid=\").concat(id)).then(function(res){return res.json();}).then(function(samplePointsList){return setSamplePoints(samplePointsList);}).catch(function(err){return console.error(err);});};var selectedDive=dives.find(function(dive){return dive.id===selectedDiveId;});return/*#__PURE__*/_jsx(_Fragment,{children:dives.length?/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(Dive,{dive:selectedDive,samplePoints:samplePoints}),/*#__PURE__*/_jsx(DiveSelect,{dives:dives,dive:selectedDive,onDiveSelected:handleDiveSelected})]}):/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Please wait around 15 seconds for the dives to load\"})});};export default DiveContainer;","map":{"version":3,"names":["React","useState","useEffect","DiveSelect","Dive","baseUrl","DiveContainer","dives","setDives","selectedDiveId","setSelectedDiveId","samplePoints","setSamplePoints","getDives","fetch","response","ok","Error","status","json","handleDiveSelected","id","getSamplePoints","window","scrollTo","top","left","behavior","then","res","samplePointsList","catch","err","console","error","selectedDive","find","dive","length"],"sources":["/Users/gavinhargin/Documents/Projects/CodeClan_FinalProject/dive_app_front_end/src/containers/DiveContainer.js"],"sourcesContent":["import React from 'react'\nimport { useState, useEffect } from 'react'\nimport DiveSelect from '../components/DiveSelect'\nimport Dive from '../components/Dive'\n\nconst baseUrl = 'https://dive-logger-back-end.herokuapp.com'\n\nconst DiveContainer = () => {\n  const [dives, setDives] = useState([])\n  const [selectedDiveId, setSelectedDiveId] = useState(null)\n  const [samplePoints, setSamplePoints] = useState([])\n\n  useEffect(() => {\n    getDives()\n  }, [])\n\n  async function getDives() {\n    const response = await fetch(`${baseUrl}/dives`)\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`)\n    }\n    const dives = await response.json()\n    setDives(dives)\n  }\n\n  const handleDiveSelected = (id) => {\n    setSelectedDiveId(id)\n    getSamplePoints(id)\n    window.scrollTo({\n      top: 400,\n      left: 100,\n      behavior: 'smooth',\n    })\n  }\n\n  const getSamplePoints = (id) => {\n    fetch(`${baseUrl}/samplepoints/bydiveid?diveid=${id}`)\n      .then((res) => res.json())\n      .then((samplePointsList) => setSamplePoints(samplePointsList))\n      .catch((err) => console.error(err))\n  }\n\n  const selectedDive = dives.find((dive) => dive.id === selectedDiveId)\n\n  return (\n    <>\n      {dives.length ? (\n        <div className=\"home-page\">\n          <Dive dive={selectedDive} samplePoints={samplePoints} />\n          <DiveSelect\n            dives={dives}\n            dive={selectedDive}\n            onDiveSelected={handleDiveSelected}\n          />\n        </div>\n      ) : (\n        <div className=\"loading\">\n          Please wait around 15 seconds for the dives to load\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default DiveContainer\n"],"mappings":"4fAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,WAAP,KAAuB,0BAAvB,CACA,MAAOC,KAAP,KAAiB,oBAAjB,C,6IAEA,GAAMC,QAAO,CAAG,4CAAhB,CAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eACA,eAA4CP,QAAQ,CAAC,IAAD,CAApD,yCAAOQ,cAAP,eAAuBC,iBAAvB,eACA,eAAwCT,QAAQ,CAAC,EAAD,CAAhD,yCAAOU,YAAP,eAAqBC,eAArB,eAEAV,SAAS,CAAC,UAAM,CACdW,QAAQ,GACT,CAFQ,CAEN,EAFM,CAAT,CAL0B,QASXA,SATW,oIAS1B,8KACyBC,MAAK,WAAIT,OAAJ,WAD9B,QACQU,QADR,kBAEOA,QAAQ,CAACC,EAFhB,8BAGU,IAAIC,MAAJ,+BAAiCF,QAAQ,CAACG,MAA1C,EAHV,8BAKsBH,SAAQ,CAACI,IAAT,EALtB,QAKQZ,KALR,eAMEC,QAAQ,CAACD,KAAD,CAAR,CANF,sDAT0B,2CAkB1B,GAAMa,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,EAAD,CAAQ,CACjCX,iBAAiB,CAACW,EAAD,CAAjB,CACAC,eAAe,CAACD,EAAD,CAAf,CACAE,MAAM,CAACC,QAAP,CAAgB,CACdC,GAAG,CAAE,GADS,CAEdC,IAAI,CAAE,GAFQ,CAGdC,QAAQ,CAAE,QAHI,CAAhB,EAKD,CARD,CAUA,GAAML,gBAAe,CAAG,QAAlBA,gBAAkB,CAACD,EAAD,CAAQ,CAC9BP,KAAK,WAAIT,OAAJ,0CAA4CgB,EAA5C,EAAL,CACGO,IADH,CACQ,SAACC,GAAD,QAASA,IAAG,CAACV,IAAJ,EAAT,EADR,EAEGS,IAFH,CAEQ,SAACE,gBAAD,QAAsBlB,gBAAe,CAACkB,gBAAD,CAArC,EAFR,EAGGC,KAHH,CAGS,SAACC,GAAD,QAASC,QAAO,CAACC,KAAR,CAAcF,GAAd,CAAT,EAHT,EAID,CALD,CAOA,GAAMG,aAAY,CAAG5B,KAAK,CAAC6B,IAAN,CAAW,SAACC,IAAD,QAAUA,KAAI,CAAChB,EAAL,GAAYZ,cAAtB,EAAX,CAArB,CAEA,mBACE,yBACGF,KAAK,CAAC+B,MAAN,cACC,aAAK,SAAS,CAAC,WAAf,wBACE,KAAC,IAAD,EAAM,IAAI,CAAEH,YAAZ,CAA0B,YAAY,CAAExB,YAAxC,EADF,cAEE,KAAC,UAAD,EACE,KAAK,CAAEJ,KADT,CAEE,IAAI,CAAE4B,YAFR,CAGE,cAAc,CAAEf,kBAHlB,EAFF,GADD,cAUC,YAAK,SAAS,CAAC,SAAf,iEAXJ,EADF,CAkBD,CAvDD,CAyDA,cAAed,cAAf"},"metadata":{},"sourceType":"module"}